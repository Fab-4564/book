<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Flipbook de Amor 3D</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      min-height: 100vh;
      margin: 0;
      background: radial-gradient(circle at center, #ffd6e8 0%, #fff0f6 100%);
      font-family: 'Georgia', serif;
      perspective: 2000px;
      overflow: hidden;
      position: relative;
      width: 100vw;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .rain-photos {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      pointer-events: none;
      z-index: 1;
    }
    .rain-photos img {
      position: absolute;
      width: 12vw;
      height: 12vw;
      min-width: 60px;
      min-height: 60px;
      max-width: 140px;
      max-height: 140px;
      object-fit: cover;
      border-radius: 18px;
      box-shadow: 0 4px 24px rgba(255,77,136,0.22);
      animation: rainPhoto 7s linear infinite;
      opacity: 0.85;
    }
    @keyframes rainPhoto {
      0% { transform: translateY(-120px) rotate(-10deg);}
      90% { opacity: 0.85;}
      100% { transform: translateY(100vh) rotate(12deg); opacity: 0;}
    }
    .book {
      width: 700px;
      max-width: 98vw;
      height: 440px;
      max-height: 80vh;
      position: relative;
      border-radius: 14px;
      background: transparent;
      perspective: 2000px;
      overflow: visible;
      display: flex;
      z-index: 2;
      margin: auto;
      left: 0; right: 0; top: 0; bottom: 0;
    }
    .flip-container {
      width: 340px;
      max-width: 48vw;
      height: 440px;
      max-height: 80vh;
      position: absolute;
      top: 0;
      left: 180px;
      perspective: 2000px;
      z-index: 30;
      transition: left 1s cubic-bezier(.77,.2,.32,1.01);
    }
    .flipper {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 1s cubic-bezier(.77,.2,.32,1.01);
      cursor: pointer;
    }
    .flipper.flip {
      transform: rotateY(-180deg);
    }
    .front, .back {
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      backface-visibility: hidden;
      border-radius: 22px;
      box-shadow: 0 18px 48px rgba(255,77,136,0.22), 0 0 0 12px #fff0f6, 0 2px 8px #ff99bb;
      box-sizing: border-box;
      padding: 2.5vw 2vw 2.5vw 2vw;
      font-size: 2vw;
      color: #444;
      border: 3px solid #ffd6e8;
      background: #fffdf5;
    }
    .front {
      background: linear-gradient(120deg, #ff4d88 60%, #ff99bb 100%);
      color: white;
      font-size: 2.5vw;
      font-weight: bold;
      text-shadow: 2px 3px 16px rgba(0,0,0,0.18);
      border: 3px solid #fff0f6;
      box-shadow: 0 0 0 10px #fff0f6, 0 18px 48px rgba(255,77,136,0.22), 0 2px 8px #ff99bb;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      position: relative;
      overflow: hidden;
      border-top-left-radius: 60px 40px;
      border-bottom-right-radius: 60px 40px;
      border-bottom-left-radius: 22px;
      border-top-right-radius: 22px;
      box-shadow:
        0 0 0 10px #fff0f6,
        0 18px 48px rgba(255,77,136,0.22),
        0 2px 8px #ff99bb,
        inset 0 0 40px 0 #ff99bb66,
        0 0 60px 0 #ff4d88aa;
    }
    .front .shine {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      background: linear-gradient(120deg, rgba(255,255,255,0.22) 0%, rgba(255,255,255,0.09) 60%, transparent 100%);
      border-radius: 22px;
      z-index: 2;
      mix-blend-mode: screen;
    }
    .front .hearts {
      position: absolute;
      top: 2vw; left: 2vw;
      font-size: 2.5vw;
      filter: drop-shadow(0 2px 8px #ff99bb);
      z-index: 3;
      animation: float 2.5s infinite alternate;
    }
    .front .hearts2 {
      position: absolute;
      bottom: 2vw; right: 2vw;
      font-size: 2vw;
      filter: drop-shadow(0 2px 8px #ff99bb);
      z-index: 3;
      animation: float 2.2s infinite alternate-reverse;
    }
    @keyframes float {
      0% { transform: translateY(0);}
      100% { transform: translateY(-1vw);}
    }
    .front .panda {
      position: absolute;
      bottom: 0; left: 50%;
      transform: translateX(-50%);
      width: 8vw;
      height: 8vw;
      min-width: 60px;
      min-height: 60px;
      z-index: 4;
      filter: drop-shadow(0 4px 12px #ff99bb);
    }
    .front .titulo {
      font-family: 'Georgia', serif;
      letter-spacing: 2px;
      margin-bottom: 10px;
      font-size: 3vw;
      z-index: 5;
      text-shadow: 2px 2px 12px #ff99bb;
      margin-top: 2vw;
    }
    .front .subtitulo {
      font-size: 1.5vw;
      margin-top: 0.5vw;
      color: #ffe6f0;
      font-weight: normal;
      z-index: 5;
      text-shadow: 1px 1px 8px #ff99bb;
      margin-bottom: 5vw;
    }
    .front .ribbon {
      position: absolute;
      top: 0; left: 50%;
      transform: translateX(-50%);
      width: 8vw;
      min-width: 60px;
      height: 2vw;
      min-height: 24px;
      background: linear-gradient(90deg, #fff0f6 60%, #ff99bb 100%);
      border-radius: 0 0 18px 18px;
      box-shadow: 0 2px 8px #ff99bb88;
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2vw;
      color: #ff4d88;
      font-family: 'Georgia', serif;
      font-weight: bold;
      letter-spacing: 1px;
    }
    .front .corner {
      position: absolute;
      top: 0; right: 0;
      width: 3vw; height: 3vw;
      min-width: 32px; min-height: 32px;
      background: radial-gradient(circle at 60% 40%, #fff0f6 60%, #ff99bb 100%);
      border-bottom-left-radius: 48px;
      z-index: 10;
      box-shadow: 0 2px 8px #ff99bb88;
    }
    .back {
      background: linear-gradient(135deg, #fffdf5 80%, #ffd6e8 100%);
      color: #ff4d88;
      font-size: 2vw;
      font-weight: bold;
      border: 2px solid #ff99bb;
      text-align: center;
      transform: rotateY(180deg);
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .sheet {
      width: 340px;
      max-width: 48vw;
      height: 440px;
      max-height: 80vh;
      position: absolute;
      top: 0;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.5s, left 0.8s cubic-bezier(.77,.2,.32,1.01);
      box-sizing: border-box;
      padding: 2vw;
      border-radius: 14px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.10);
      font-size: 2vw;
      color: #444;
      border: 1px solid #ffd6e8;
      background: #fffdf5;
      z-index: 10;
    }
    .sheet.visible {
      opacity: 1;
      visibility: visible;
    }
    .sheet.left {
      left: 0;
    }
    .sheet.right {
      left: 360px;
    }
    .sheet.end {
      background: linear-gradient(135deg, #fffdf5 80%, #ffd6e8 100%);
      color: #444;
      font-size: 2vw;
      font-weight: bold;
      border: 2px solid #ff99bb;
      cursor: pointer;
    }
    .arrow-btn {
      position: absolute;
      bottom: 1vw;
      right: 1vw;
      background: #ff4d88;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 2.5vw;
      height: 2.5vw;
      min-width: 32px;
      min-height: 32px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 1.5vw;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(255,77,136,0.18);
      transition: background 0.2s;
      z-index: 2;
    }
    .arrow-btn:active {
      background: #ff99bb;
    }
    #nombreEmergente {
      position: fixed;
      background: transparent;
      color: #ff4d88;
      font-size: 32px;
      font-family: 'Georgia', serif;
      font-weight: bold;
      border-radius: 0;
      box-shadow: none;
      padding: 0;
      z-index: 1000;
      display: none;
      pointer-events: none;
      left: 0; top: 0;
      transform: translate(-50%, -50%);
      animation: none;
      white-space: nowrap;
    }
    /* Efecto explosi√≥n */
    .explosion {
      animation: explosion 0.7s cubic-bezier(.42,1.5,.58,1) forwards;
    }
    @keyframes explosion {
      0% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.2) rotate(-20deg);
        letter-spacing: 0px;
        filter: blur(8px);
      }
      60% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1.2) rotate(8deg);
        letter-spacing: 8px;
        filter: blur(0px);
      }
      100% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1) rotate(0deg);
        letter-spacing: 2px;
        filter: blur(0px);
      }
    }
    .explosion-nombre {
      position: fixed;
      color: #ff4d88;
      font-size: 2.5vw;
      min-font-size: 22px;
      font-family: 'Georgia', serif;
      font-weight: bold;
      pointer-events: none;
      background: transparent;
      border-radius: 0;
      box-shadow: none;
      padding: 0;
      z-index: 1000;
      white-space: nowrap;
      opacity: 0;
      transform: translate(-50%, -50%) scale(0.2);
      animation: explosionFade 1.1s cubic-bezier(.42,1.5,.58,1) forwards;
    }
    @keyframes explosionFade {
      0% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.2) rotate(-20deg);
        letter-spacing: 0px;
        filter: blur(8px);
      }
      40% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1.3) rotate(8deg);
        letter-spacing: 12px;
        filter: blur(0px);
      }
      70% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1) rotate(0deg);
        letter-spacing: 2px;
        filter: blur(0px);
      }
      100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(1.1) rotate(-8deg);
        letter-spacing: 8px;
        filter: blur(6px);
      }
    }
    /* Mejoras para m√≥viles */
    @media (max-width: 600px) {
      body {
        padding: 0;
        min-height: 100vh;
        height: 100vh;
        width: 100vw;
        box-sizing: border-box;
      }
      .book {
        width: 98vw;
        height: 62vw;
        min-height: 220px;
        max-width: 100vw;
        max-height: 80vh;
        margin: auto;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: visible;
        flex-direction: row;
      }
      .flip-container {
        width: 47vw;
        height: 62vw;
        min-width: 120px;
        max-width: 49vw;
        max-height: 80vh;
        left: 0 !important; /* Al girar, portada a la izquierda */
        margin: 0;
        border-radius: 10px;
        font-size: 3vw;
        padding: 3vw;
        position: absolute;
        top: 0;
        z-index: 30;
        transition: left 1s cubic-bezier(.77,.2,.32,1.01);
      }
      .sheet.right {
        left: 49vw !important; /* P√°gina 1 a la derecha */
      }
      .sheet.left {
        left: 0 !important;
      }
      .sheet {
        width: 47vw;
        height: 62vw;
        min-width: 120px;
        max-width: 49vw;
        max-height: 80vh;
        margin: 0;
        border-radius: 10px;
        font-size: 3vw;
        padding: 3vw;
        position: absolute;
        top: 0;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.5s, left 0.8s cubic-bezier(.77,.2,.32,1.01);
        box-sizing: border-box;
        border: 2px solid #ffd6e8 !important;
      }
      .sheet.visible {
        opacity: 1;
        visibility: visible;
      }
    }
    /* Ajusta el z-index para asegurar el orden correcto */
    #flipPortada {
      z-index: 10; /* La portada y su reverso quedan debajo de las p√°ginas */
    }
    #sheet1 {
      z-index: 20; /* P√°gina 1 encima de la portada */
    }
    #sheet2 {
      z-index: 30; /* P√°gina 2 encima del reverso de la portada y p√°gina 1 */
    }
    #sheet3 {
      z-index: 30; /* P√°gina 3 encima del reverso de la p√°gina 2 */
    }
    #sheet4 {
      z-index: 30; /* P√°gina 4 encima del reverso de la p√°gina 3 */
    }
    #sheet5 {
      z-index: 10; /* P√°gina 5 (final) debajo de las dem√°s p√°ginas */
    }
    .sheet.right, .sheet.left {
      border: 2px solid #ffd6e8 !important;
    }
  </style>
</head>
<body>
  <div class="rain-photos" id="rainPhotos"></div>
  <div class="book" id="book">
    <!-- Portada con reverso y detalles 3D -->
    <div class="flip-container" id="flipPortada">
      <div class="flipper" id="flipper" onclick="abrirPortada()">
        <div class="front">
          <span class="ribbon">Te amo</span>
          <span class="corner"></span>
          <span class="hearts">üíñüíó</span>
          <span class="hearts2">üíûüíï</span>
          <div class="shine"></div>
          <div class="titulo">Nuestro Amor</div>
          <div class="subtitulo">Un viaje de sentimientos</div>
          <svg class="panda" viewBox="0 0 120 120">
            <ellipse cx="60" cy="80" rx="40" ry="30" fill="#fff"/>
            <ellipse cx="40" cy="60" rx="12" ry="14" fill="#fff"/>
            <ellipse cx="80" cy="60" rx="12" ry="14" fill="#fff"/>
            <ellipse cx="35" cy="45" rx="8" ry="10" fill="#222"/>
            <ellipse cx="85" cy="45" rx="8" ry="10" fill="#222"/>
            <circle cx="60" cy="80" r="18" fill="#fff"/>
            <ellipse cx="52" cy="80" rx="4" ry="6" fill="#222"/>
            <ellipse cx="68" cy="80" rx="4" ry="6" fill="#222"/>
            <ellipse cx="60" cy="90" rx="7" ry="4" fill="#222"/>
            <ellipse cx="60" cy="95" rx="3" ry="2" fill="#ff99bb"/>
          </svg>
        </div>
        <div class="back">
          <div style="margin-top:180px;">Para ti, con todo mi amor üíå</div>
        </div>
      </div>
    </div>
    <!-- P√°ginas del libro -->
    <div class="sheet right" id="sheet1">
      <strong>Cap√≠tulo 1:</strong> El Encuentro<br><br>
      Desde el primer momento que te vi, supe que algo especial estaba por comenzar. <br>
      <span style="font-size:32px;">üòç</span>
      <button class="arrow-btn" onclick="nextBookPage(); event.stopPropagation();" title="Siguiente p√°gina">&#8594;</button>
    </div>
    <div class="sheet left" id="sheet2">
      <strong>Cap√≠tulo 2:</strong> Los Momentos<br><br>
      Cada sonrisa, cada abrazo y cada palabra han llenado mi vida de alegr√≠a.<br>
      <span style="font-size:32px;">ü§ó</span>
    </div>
    <div class="sheet right" id="sheet3">
      <strong>Cap√≠tulo 3:</strong> El Futuro<br><br>
      Quiero seguir escribiendo esta historia contigo, cada d√≠a, cada a√±o, por siempre.<br>
      <span style="font-size:32px;">üíç</span>
      <button class="arrow-btn" onclick="nextBookPage(); event.stopPropagation();" title="Siguiente p√°gina">&#8594;</button>
    </div>
    <div class="sheet left" id="sheet4">
      <strong>Cap√≠tulo 4:</strong> Nuestros Sue√±os<br><br>
      Juntos hemos so√±ado y alcanzado metas que jam√°s imagin√©.<br>
      <span style="font-size:32px;">üåü</span>
    </div>
    <div class="sheet right" id="sheet6">
      <strong>Cap√≠tulo 5:</strong> Aventuras<br><br>
      Cada viaje y cada aventura contigo es un tesoro inolvidable.<br>
      <span style="font-size:32px;">‚úàÔ∏è</span>
      <button class="arrow-btn" onclick="nextBookPage(); event.stopPropagation();" title="Siguiente p√°gina">&#8594;</button>
    </div>
    <div class="sheet left" id="sheet7">
      <strong>Cap√≠tulo 6:</strong> Nuestro Hogar<br><br>
      El mejor lugar del mundo es donde estamos juntos.<br>
      <span style="font-size:32px;">üè°</span>
    </div>
    <div class="sheet right" id="sheet8">
      <strong>Cap√≠tulo 7:</strong> El Amor Verdadero<br><br>
      Gracias por ense√±arme lo que significa amar de verdad.<br>
      <span style="font-size:32px;">üíû</span>
      <button class="arrow-btn" onclick="nextBookPage(); event.stopPropagation();" title="Siguiente p√°gina">&#8594;</button>
    </div>
    <div class="sheet left" id="sheet9">
      <div style="font-size:22px; color:#d72660;">Siempre juntos, mi amor eterno. ‚ù§Ô∏è</div>
    </div>
    <div class="sheet end right" id="sheet5" onclick="goToCover()">
      Gracias por ser mi gran amor üíñ
    </div>
  </div>
  <div id="nombreEmergente">Paulina</div>
  <audio id="music" src="musica.mp3"></audio>
  <script>
    // Lluvia de fotos
    const photoUrls = [
      "Min bonita.jpg"
    ];
    function createRainPhoto() {
      const rain = document.getElementById('rainPhotos');
      const img = document.createElement('img');
      img.src = photoUrls[Math.floor(Math.random() * photoUrls.length)];
      img.style.left = Math.random() * (window.innerWidth - Math.min(window.innerWidth * 0.12, 140)) + "px";
      img.style.animationDuration = (5 + Math.random() * 4) + "s";
      img.style.opacity = 0.7 + Math.random() * 0.3;
      rain.appendChild(img);
      setTimeout(() => { img.remove(); }, 7000);
    }
    setInterval(createRainPhoto, 900);

    // Paginaci√≥n
    let currentPair = -1;
    const pairs = [
      ["sheet2", "sheet3"],
      ["sheet4", "sheet6"],
      ["sheet7", "sheet8"],
      ["sheet9", "sheet5"]
    ];
    function abrirPortada() {
      document.getElementById('flipper').classList.add('flip');
      setTimeout(() => {
        document.getElementById('flipPortada').style.left = "0px";
        document.getElementById('sheet1').classList.add('visible');
        currentPair = 0;
        document.getElementById("music").play();
      }, 1000);
    }
    function nextBookPage() {
      if (currentPair < pairs.length) {
        if (currentPair === 0) {
          document.getElementById('flipPortada').classList.remove('visible');
          document.getElementById('sheet1').classList.remove('visible');
        } else {
          document.getElementById(pairs[currentPair-1][0]).classList.remove('visible');
          document.getElementById(pairs[currentPair-1][1]).classList.remove('visible');
        }
        document.getElementById(pairs[currentPair][0]).classList.add('visible');
        document.getElementById(pairs[currentPair][1]).classList.add('visible');
        currentPair++;
      }
    }
    function goToCover() {
      for (let i = 0; i < pairs.length; i++) {
        document.getElementById(pairs[i][0]).classList.remove('visible');
        document.getElementById(pairs[i][1]).classList.remove('visible');
      }
      document.getElementById('sheet1').classList.remove('visible');
      document.getElementById('flipPortada').style.left = "180px";
      document.getElementById('flipper').classList.remove('flip');
      currentPair = -1;
      document.getElementById("music").pause();
      document.getElementById("music").currentTime = 0;
    }
    document.getElementById('flipPortada').style.left = "180px";

    // Mostrar 3 nombres con efecto explosi√≥n y posiciones separadas para que se lean bien
    document.body.addEventListener('click', function(e) {
      const book = document.getElementById('book');
      if (!book.contains(e.target)) {
        // Calcula desplazamientos relativos al tama√±o de la ventana
        const base = Math.max(window.innerWidth, window.innerHeight) * 0.03;
        const nombres = [
          { texto: "Keyllie", dx: -base, dy: -base },
          { texto: "Te amo", dx: 0, dy: base },
          { texto: "Mi amor", dx: base, dy: -base }
        ];
        nombres.forEach((obj, idx) => {
          const nombre = document.createElement('div');
          nombre.textContent = obj.texto;
          nombre.className = 'explosion-nombre';
          nombre.style.left = (e.clientX + obj.dx) + "px";
          nombre.style.top = (e.clientY + obj.dy) + "px";
          nombre.style.animationDelay = (idx * 0.07) + "s";
          document.body.appendChild(nombre);
          setTimeout(() => { nombre.remove(); }, 1100);
        });
      }
    });
  </script>
</body>
</html>

